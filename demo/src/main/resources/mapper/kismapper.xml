<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.mapper.kismapper">
	
	
	<select id="getList" resultType="com.example.demo.dto.BoardVO">
		
		SELECT *
		 from board
		order by seq
				
	</select>
	
	<select id="login" resultType="com.example.demo.dto.EmpVO">
		
		SELECT count(*)
		from st_login
		where id = ${id} and password = ${passowrd}
		 
	</select>
	
			
	
	<insert id="insertComment" parameterType="com.example.demo.dto.BoardVO">
		
		insert into Board values ( ( select convert(varchar(10),isnull(max(convert(integer,seq)),0)+1) from board ), '${title}','${writer}',( SELECT FORMAT(GETDATE(), 'yyyy-MM-dd') AS FormattedDate )
								  ,0,'${textWrite}') 
		
	</insert>
	
	<select id="getComment" resultType="com.example.demo.dto.BoardVO">
		
		Select *
		 from board
		where seq = '${seq}'
		
	</select>	
	
	<update id="updateComment" parameterType="com.example.demo.dto.BoardVO">
		
		update board 
		 set title = '${title}', writer = '${writer}',textWrite = '${textWrite}', writeDate = ( SELECT FORMAT(GETDATE(), 'yyyy-MM-dd') AS FormattedDate  )
		where seq = '${seq}'  
		
	</update>
	
	<update id="updateView" parameterType="com.example.demo.dto.BoardVO">
		
		update board
		  set viewCount = viewCount+1
		 where seq = '${seq}'
		
	</update>
	
	<delete id="deleteComment" parameterType="com.example.demo.dto.BoardVO">
		
		delete from board
		 where seq = '${seq}'
		
	</delete>
	
</mapper>